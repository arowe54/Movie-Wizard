{% extends "layout.html" %}

{% block title %}
    Profile
{% endblock %}

{% block main %}

<!--Show username-->
<button>
    <p>Username: {{ username }}</p>
</button>
<!--TODO: Show password (password protected / hidden)(click an eye icon to show, like normally)-->
<button>
    <p>Password: <span style="-webkit-text-security: disc" name="original_pwd" id="original_pwd">{{ session["password"] }}</span></p>
    <!--TODO: Change from click to show when clicked and held -->
    <button name="show_password" id="show_password">Show Password</button>
</button>


<!--Show/hide password-->
<script>
    $(document).ready(function() {
        // Maybe creating a "show" function would be more adaptable
        // When user clicks show password button
        $('#show_password').click(function() {
            // Save original style
            style = $('#original_pwd').attr('style');
            console.log(style);

            // If its already hidden
            if (style == '-webkit-text-security: disc'){
                // Show the password
                $('#original_pwd').attr('style', '-webkit-text-security: none');
            }
            else {
                // Hide the password
                $('#original_pwd').attr('style', '-webkit-text-security: disc');
            }
        })
    })
</script>

<div class="row">
    <div class="col">
        <!--Change username-->
        <button type="text" name="update_username" id="update_username">Change Username</button>
        <div id="update_username_form" class="container"></div>
    </div>

    <script>
        $(document).ready(function() {
            // When user clicks update username
            $('#update_username').click(function() {
                // Append a form just below the change username button
                $('#update_username_form').html(`
                    <p> Username: {{ username }} </p>
                    <form name="change_username" action="/update_user" method="post">
                        <p> New Username:
                            <input type="text" name="new_username" id="new_username" autocomplete="off">
                            <button type="submit">Submit</button>
                        </p>
                    </form>
                    `
                    );
            })
        })
    </script>

    <div class="col">
        <!--Update password-->
        <button type="text" name="update_pwd" id="update_pwd">Change Password</button>
        <div id="update_pwd_form"></div>
    </div>

    <script>
        $(document).ready(function() {
            // When user clicks update password
            $('#update_pwd').click(function() {
                // Append a form just below the change username button
                $('#update_pwd_form').html(`
                    <p> Password: <span class="-webkit-text-security: disc" id="show_pwd2">{{ session["password"] }}</span> </p>
                    <button>Show password</button>
                    <form name="change_pwd" action="/update_user" method="post">
                        <p> New Password:
                            <input type="password" name="new_pwd" id="new_pwd">
                            <button type="submit">Submit</button>
                        </p>
                    </form>
                    `
                    );
            })
        })
    </script>
</div>


<!--TODO: Add preferences (ex. isAdult == false, fav genre, idk)(maybe not bc of time)(do last)-->

{% endblock %}